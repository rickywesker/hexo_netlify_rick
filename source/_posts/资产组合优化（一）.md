---
title: 资产组合优化（一）
date: 2021-11-23 07:59:40
tags:
  - 理论
  - 金融
  - 数学
categories:
  - 知识蒸馏
---

![](https://st3.depositphotos.com/2935785/18245/v/950/depositphotos_182453900-stock-illustration-cryptocurrency-icon-set-pixel-art.jpg)

# 资产组合优化(一)

## 投资组合理论和计算

+ 市场中常常有非常多的资产可供选择，如何进行资产选择和配置，是投资的首要问题。
+ 投资组合理论关注这类问题
+ 投资组合理论考虑收益和风险两个因素和基于两个原则。
   - 收益尽可能高
   - 风险尽可能小

##  期望收益和风险的平衡

进行投资，或者选择投资组合，需要考虑的那些因素呢？
1.  **收益尽可能高，**
   - 预期收益率，尽可能地获得高的收益率；预期收益率越高，投资或投资组合就越好   
   - 对于风险资产，预期收益率只是一个期望的概念，在一次投资中究竟得到多少收益率具有不确定性。
   - 这种不确定性就是风险

**风险的概念** 

+ 比如 我们投资某项资产可能有两种情况，一种情况是收益10%和亏损10%的概率都是50%。投资这种资产的预期收益率就是0。
+ 若投资第二种资产可能有两种结果，一是收益20%的概率为50%，二是亏损20%的概率为50%。投资这种资产的预期收益率仍然是0。
+ 虽然两种资产的预期收益率是一样的，但显然其风险是不同的。直观上，第二种的风险更高。



2. **风险，尽可能小**

      + 这里涉及如何定义风险的问题，
      + 上面的例子中第二种资产的风险更高， 我们看出是因为不确定性更大。
      + 方差或标准差是一种常用风险度量。

   + 通常情形下，预期收益率高的产品一般风险也会较高，这种较高的收益率是一种**风险溢价**
     - 比如固定收益产品，银行存款或者国家债券，其收益率较低，但不确定性，即风险非常低。
     - 我们将那些没有风险的资产的收益率叫做无风险收益
     - 证券市场中的股票的风险一般比无风险资产（比如国债）高很多，其收益有更大的不确定性。
     - 风险资产的收益高于无风险资产的部分原因正是因为风险，这部分收益也被称为风险溢价，是对承担风险的补偿。如果风险没有溢价，理论上是没有人愿意承担风险的。

+ 因此，对不同的资产，我们就需要对其预期收益率和风险水平进行比较，选择在某种设定下最优的资产或组合
   - 给定风险的条件下，最大化预期收益率
   - 给定预期收益率的条件下，极小化风险 
+ 下面代码给出了一个资产的收益率的常用统计量，其中在基本的投资组合理论中，我们主要关心 均值和标准差。

```python
data=pd.read_csv("000001.SH.csv",index_col=0,parse_dates=True)
close=data["1990":"2020"]["CLOSE"]
closeyear=close.resample("A-DEC").last()
ret=closeyear.pct_change()  
1990-12-31     127.6100
1991-12-31     292.7500
1992-12-31     780.3900
1993-12-31     833.8000
1994-12-31     647.8700
ret=ret.dropna()
ret.describe()
count    30.000000
mean      0.213396
std       0.534750
min      -0.653942
25%      -0.143073
50%       0.067010
75%       0.463495
max       1.665722
Name: CLOSE, dtype: float64
```

## 一个风险资产和一个无风险资产的组合

+ 假设市场中只有无风险资产和一种风险资产，如果分配资金？

+ 设无风险资产的收益率为4%，风险资产为上证指数基金，年收益率的期望为0.2633，标准差为0.5843

+ 我们要根据该信息在无风险资产和指数基金之间分配资金，
   - 设总资产为1，分配到指数基金的资产为
	
	  {% mathjax %}
	
   w
   
   {% endmathjax %}
   
   - 分配到无风险资产上的资金为 
     
     {% mathjax %}1-w{% endmathjax %}
     
      ,其中
     
     {% mathjax %}0\leq w\leq 1{% endmathjax %}
     
   - 则组合的预期收益率为：
     
      {% mathjax %}E(R)=0.2233w+0.04{% endmathjax %}
   
   
   - 标准差为：
     {% mathjax %}
     \sigma_R=0.5843w
     {% endmathjax %}
     
   
+ 显然，给定预期收益率，投资权重就确定了，从而风险也确定了。

+ 同样，给定能承受的风险，投资权重也确定了，从而预期收益率也就确定了。

+ 因此，以权重为参数，
  {% mathjax %}
  (0.2233⋅w + 0.04, 0.5843⋅w)
  {% endmathjax %}
  给出了投资组合预期收益和风险（标准差）之间的关系

+ 一般地，一个最优投资组合可以通过两个步骤进行：
   1. 寻找最优的风险资产的投资组合，这个组合通常被称为切线组合 "**tanency protfolio**"
   2. 设定切线组合和无风险资产的恰当比例，形成最终的最优投资组合。
+ 第二步就用我们上面介绍的方法确定。
+ 投资组合选择的最终目标是在众多风险资产和无风险资产中选择最优的组合，我们只讨论两个风险资产和无风险资产的组合.
+ 下面首先讨论两个风险资产的投资组合，然后再加入无风险资产

## 两个风险资产

+ 假设两个风险资产的收益率随机变量分别为 {% mathjax %}R_1{% endmathjax %}和{% mathjax %}R_2{% endmathjax %}

+  投资到两个资产的资本权重为{% mathjax %}w{% endmathjax %}和{% mathjax %}1-w{% endmathjax %}。 则投资组合的收益率为：

{% mathjax %}
R=wR_1+(1-w)R_2
{% endmathjax %}

+ 计算上面投资组合的期望和方差，需要各自的期望方差和两个变量的相关系数
  {% mathjax %}
  \mu_1,\mu_2,\sigma_1,\sigma_2,\rho_{12}
  {%  endmathjax %}
  

显然：
{% mathjax %}
E(R)=w\mu_1+(1-w)\mu_2
{%  endmathjax %}

{% mathjax %}
\sigma_R^2=w^2\sigma_1^2+(1-w)^2\sigma_2^2+2w(1-w)\rho_{12}\sigma_1\sigma_2
{%  endmathjax %}



+ 首先通过一个虚拟的例子来说明
  
   设  
   {% mathjax %}
   \mu_1=0.14,\mu_2=0.08,\sigma_1=0.2,\sigma_2=0.15,\rho_{12}=0
   {%  endmathjax %}
   

![下載.png](https://i.loli.net/2021/11/23/GntqyY3HBmvDpLA.png)

观察上述曲线 ,我们可以得到几点：

+ 收益在0.08到0.14之间，即单个资产的最高收益率和最低收益率之间
+ 风险（用标准差度量）低于单个资产的最低值
+ 存在风险最低的一个组合，其它组合的风险高于该组合
+ 该组合称为**最小方差组合**，该组合并不是所有组合中收益率最小的。那些收益率低于最小方差组合的投资组合显然是不好的!（红色）
+ 在上述曲线的上侧(蓝色)，收益率高于最小方差组合的组合构成了投资组合的**有效前沿**，有效前沿上的投资组合称为**有效组合**，或者称为**均值-方差有效组合**

## 两个风险资产和无风险资产的投资组合
+ 前面已经介绍了有效前沿的概念，其上的点都是给定分配在两种风险资产上的权重所得到的组合的收益率{% mathjax %}(R){%  endmathjax %}的标准差和预期收益{% mathjax %}(\sigma_R,E(R)){%  endmathjax %}
+ 权重 {% mathjax %}w{%  endmathjax %} 是取值0，1之间的数，给定{% mathjax %}w{%  endmathjax %}后，组合就确定了
+ 下面我们将讨论将两种风险资产构造的风险资产组合和无风险资产混合在一起

![下載 _1_.png](https://i.loli.net/2021/11/23/q4O6f8l1IpVDZKL.png)

+ 无风险资产的收益率为0.06
+ 首先看连接F和 {% mathjax %}R_2{%  endmathjax %}的线段， 根据前面介绍过的内容，其描述单个风险资产{% mathjax %}R_2{%  endmathjax %}和无风险资产的组合
+ 给定两个风险资产的投资比例，我们就得到一个投资组合。考虑在这个投资组合和无风险收益的组合
+ 若该风险资产投资组合为最小方差组合，当投资于该组合资金的权重从1变化到0时，对应的组合收益率的标准差和期望 {% mathjax %}(\sigma,E(R)){%  endmathjax %} 为上图的MF线段。
+ 我们可以看出，对于有相同风险的组合，FM上的组合比{% mathjax %}FR_2{%  endmathjax %}上的组合有更高的预期收益



+ **Sharpe's ratio**
  - sharpe比率值上述直线的斜率，直观解释是承担单位风险所能得到的收益。
      + 公式
  - 衡量投资组合的重要指标

  **最优组合**

+ 考虑从F点出发点射线直线，即包含无风险资产的投资组合，从斜率（sharp比率）无穷大开始，我们逐渐降低斜率
+ 当该线第一次接触两个资产的有效前沿时，此时该直线和有效前沿相切，只有一个交点。记该交点为{% mathjax %}T{%  endmathjax %}
+ 切点 {% mathjax %}T{%  endmathjax %} 代表的两个风险资产的投资组合为切线组合
+ 线段FT描述的组合是Sharp比率最高的组合！也成为最优组合或有效组合



**有效组合和最优组合**

+ 混合切线组合和无风险资产所得到的组合都是有效组合，
+ 不同的最优组合具有不同的预期收益率和风险要求，但满足如下性质：
   - 给定风险，他是预期收益率最高的组合
   - 更定预期收益率，他是风险最低的组合
+ 因此，在最优组合之间进行选择时，我们如果希望降低风险，就必须同时减低预期收益；相反地，如果我们希望增加预期收益，就不等不接受更高的风险。
+ 选择不同的最优组合只需要改变我们切线组合和无风险资产的投资比率。



**切线组合如何确定？**


+ 设两个风险资产的收益率期望和标准差风别为{% mathjax %}\mu_1,\sigma_1,\mu_2,\sigma_2{%  endmathjax %}，相关系数为{% mathjax %}\rho_{12}{%  endmathjax %},
+ 无风险资产的收益率为{% mathjax %}\mu_f{%  endmathjax %}
+ 记 {% mathjax %}V_1=\mu_1-\mu_f;V_2=\mu_2-\mu_f{%  endmathjax %}，两者为超额收益率，即超过无风险资产的收益率
+ 则切线组合的则切线组合的权重{% mathjax %}w_T{%  endmathjax %}，即在投向两种风险资产的资金中第一种资产所占比例，由如下公式确定：

{% mathjax %}
w_T=\frac{V_1\sigma_2^2-V_2\rho_{12}\sigma_1\sigma_2}{V_1 \sigma_2^2+V_2 \sigma_1^2-(V_1+V_2)\rho_{12}\sigma_1\sigma_2}
{%  endmathjax %}

+ {% mathjax %}R_T{%  endmathjax %} 表示切线组合收益率，{% mathjax %}E(R_T),\sigma_T{%  endmathjax %}表示他的期望和标准差，则

{% mathjax %}
\begin{array}{rl}E(R_T)=&w_T\mu_1+(1-w_T)\mu_2\\ \sigma_T=&\sqrt{w_T^2\sigma_1^2+(1-w_T)^2\sigma_2^2+2\rho_{12}\sigma_1\sigma_2} \end{array}
{% endmathjax %}





![下載 _2_.png](https://i.loli.net/2021/11/23/QwDEXZA6YyefHUd.png)





